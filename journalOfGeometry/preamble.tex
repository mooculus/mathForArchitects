%% semester watermark
\newcommand{\semester}{%
  \ifcase\month
  \or SP %1
  \or SP %2
  \or SP %3
  \or SP %4
  \or M  %5
  \or SU %6
  \or SU %7
  \or AU %8
  \or AU %9
  \or AU %10
  \or AU %11
  \or AU %12
  \fi
}

\usepackage{draftwatermark}
\SetWatermarkText{\normalfont 
\semester \the\year}
\SetWatermarkScale{1}
\SetWatermarkLightness{.98}


 \usepackage{amsmath,amsthm}

\usepackage{multicol}

\usepackage{subcaption}


%% where to find images
\graphicspath{  
{./}
{./gettingStarted/}
{./whatDoYaWannaKnow/}
{./areaOfTriangles/}
{./formulasGalore/}
{./roofEstimates/}
{./concreteExample/}
{./hipToBeSquare/}
{./minifigsAndSuperfigs/}
{./drawingWithTheTurtle/}
{./bisectionMethod/}
{./anglesAndRightTriangles/}
{./llamaAndTheTriangle/}
{./tilings/}
{./lawOfSines/}
{./lawOfCosines/}
{./staircases/}
{./pitch/}
{./qualityControl/}
{./dollhouse/}
{./symmetry/}
{./nGonBlock/}
{./symTriangle/}
{./symSquare/}
{./symHex/}
{./stars/}
{./substars/}
{./stringArt/}
{./lineArtAndSymmetry/}
{./coloringBook/}
{./reflectingSVG/}
{./friezePatterns/}
{./typesOfSymmetry/}
{./combinationsOfSym/}
{./fiveTypesOfSym/}
{./sevenTypesOfFrieze/}
{./togetherStairs/}
{./reptilesAndArea/}
{./supersizeMe/}
{./identifyingSymmetry/}
{./inTheWild/}
{./quickQuestions/}
{./favoriteTilings/}
{./lifeOnACone/}
{./windFarm/}
{./applyOurselves/}
{./earth/}
{./geometryInDisguise/}
{./sineAndCosine/}
{./pitch/}
{./notSoQuickQuestions/}
}


%% page layout
\usepackage[cm,headings]{fullpage}
\raggedright
\setlength\headheight{13.6pt} %% otherwise the headers hit the text.


%% fonts
%\usepackage{euler}

\usepackage{FiraMono}
\renewcommand\familydefault{\ttdefault} 
\usepackage[defaultmathsizes,LGRgreek]{mathastext}
\usepackage[htt]{hyphenat}

\usepackage[T1]{fontenc}
\usepackage[scaled=1]{FiraSans}
%
%\usepackage{wedn}
\usepackage{pbsi} %% Answer font


\usepackage{cancel} %% strike through in pitch/pitch.tex


%% \usepackage{ulem} %% 
%% \renewcommand{\ULthickness}{2pt}% changes underline thickness
\usepackage{tikz}

\tikzset{>=stealth}

\usepackage{adjustbox}

\setcounter{titlenumber}{-1}

%% journal style
%% skip journal style
%% \frontstyle
\makeatletter
\newcommand\journalstyle{%
  \def\activitystyle{activity-section}
  \def\maketitle{%
    \addtocounter{titlenumber}{1}%
                {\flushleft\small\sffamily\bfseries\@pretitle\par\vspace{-1.5em}}%
                {\flushleft\LARGE\sffamily\bfseries\thetitlenumber\hspace{1em}\@title \par }%
                {\vskip .6em\noindent\textit\theabstract\setcounter{question}{0}\setcounter{sectiontitlenumber}{0}}%
                    \par\vspace{2em}
                    \phantomsection\addcontentsline{toc}{section}{\thetitlenumber\hspace{1em}\textbf{\@title}}%
                     }}

\newcommand\skipjournalstyle{%
  \def\activitystyle{activity-section}
  \def\maketitle{%
    \addtocounter{titlenumber}{1}%
                {\flushleft\small\sffamily\bfseries\@pretitle\par\vspace{-1.5em}}%
                {\flushleft\LARGE\sffamily\bfseries\thetitlenumber\hspace{1em}\@title$^\star$ \par }%
                {\vskip .6em\noindent\textit\theabstract\setcounter{question}{0}\setcounter{sectiontitlenumber}{0}}%
                    \par\vspace{2em}
                    \phantomsection\addcontentsline{toc}{section}{\thetitlenumber\hspace{1em}\textbf{\@title$^\star$}}%
                     }}



%% no number for refs
\newcommand\partstyle{%
  \def\activitystyle{activity-chapter}
  \def\maketitle{%
                {\flushleft\small\sffamily\bfseries\@pretitle\par\vspace{-1.5em}}%
                {\flushleft\Huge\sffamily\bfseries\@title \par }%3
                {\vskip .6em\noindent\textit\theabstract}%
                    \par\vspace{2em}
                    \phantomsection\addcontentsline{toc}{section}{\Large\textbf{\@title}}%
                     }\thispagestyle{empty}}


%% no number for refs
\newcommand\checkstyle{%
  \def\activitystyle{activity-section}
  \def\maketitle{%
                {\flushleft\small\sffamily\bfseries\@pretitle\par\vspace{-1.5em}}%
                {\flushleft\large\sffamily\bfseries Check yourself\par }%
                {\vskip .6em\noindent\textit\theabstract\setcounter{exercise}{0}}%
                    \par\vspace{2em}
                    %\phantomsection\addcontentsline{toc}{section}{\Large\textbf{\@title}}%
                     }}

\makeatother



%% thm like environments
\let\question\relax
\let\endquestion\relax

\newtheoremstyle{QuestionStyle}{\topsep}{\topsep}%%% space between body and thm
		{}                      %%% Thm body font
		{}                              %%% Indent amount (empty = no indent)
		{\bfseries}            %%% Thm head font
		{)}                              %%% Punctuation after thm head
		{ }                           %%% Space after thm head
		{\thmnumber{#2}\thmnote{ \bfseries(#3)}}%%% Thm head spec
\theoremstyle{QuestionStyle}
\newtheorem{question}{}




\let\exercise\relax
\let\endexercise\relax

\newtheoremstyle{ExerciseStyle}{\topsep}{\topsep}%%% space between body and thm
		{}                      %%% Thm body font
		{}                              %%% Indent amount (empty = no indent)
		{\bfseries}            %%% Thm head font
		{}                              %%% Punctuation after thm head
		{3em}                           %%% Space after thm head
		{Check~\thmnumber{#2}\thmnote{ \bfseries(#3)}}%%% Thm head spec
\theoremstyle{ExerciseStyle}
\newtheorem{exercise}{}



\newcommand{\answerlistbox}[5]{
  \vfill
  \hfill \fbox{\tiny\begin{minipage}{1in}
  \flushleft
  Answers:
  \flushright\rotatebox{180}{\begin{minipage}{.8in}\tiny
    C1: #1\\
    C2: #2\\
    C3: #3\\
    C4: #4\\
    C5: #5
  \end{minipage}}
  \end{minipage}}
}

\let\freeResponse\relax
\let\endfreeResponse\relax

%% \newtheoremstyle{ResponseStyle}{\topsep}{\topsep}%%% space between body and thm
%% 		{\wedn\bfseries}                      %%% Thm body font
%% 		{}                              %%% Indent amount (empty = no indent)
%% 		{\wedn\bfseries}            %%% Thm head font
%% 		{}                              %%% Punctuation after thm head
%% 		{3ex}                           %%% Space after thm head
%% 		{\underline{\underline{\thmname{#1}}}}%%% Thm head spec
%% \theoremstyle{ResponseStyle}

\usepackage[tikz]{mdframed}
\mdfdefinestyle{ResponseStyle}{backgroundcolor=none,leftmargin=1cm,linecolor=black,roundcorner=5pt,
, font=\bsifamily,}%font=\wedn\bfseries\upshape,}


\ifhandout
\NewEnviron{freeResponse}{}
\else
%\newtheorem{freeResponse}{Response:}
\newenvironment{freeResponse}{\begin{mdframed}[style=ResponseStyle]}{\end{mdframed}}
\fi



\usepackage[tikz]{mdframed}
\mdfdefinestyle{OutcomeStyle}{backgroundcolor=none,leftmargin=2cm,rightmargin=2cm,linecolor=black,roundcorner=5pt,
, font=\small\sffamily,}%font=\wedn\bfseries\upshape,}
\newenvironment{listOutcomes}{\begin{mdframed}[style=OutcomeStyle]After answering the following questions, students should be able to:\begin{itemize}}{\end{itemize}\end{mdframed}}
\newenvironment{listSectionOutcomes}{\begin{mdframed}[style=OutcomeStyle]After completing the following journal entries, students should be able to:\begin{itemize}}{\end{itemize}\end{mdframed}}


\usepackage[tikz]{mdframed}
\mdfdefinestyle{ObjectivesStyle}{backgroundcolor=none,leftmargin=2cm,rightmargin=2cm,linecolor=black,roundcorner=5pt,
, font=\small\sffamily,}%font=\wedn\bfseries\upshape,}
\newenvironment{listObjectives}{\begin{mdframed}[style=OutcomeStyle]\color{red}The following questions address these semester-long Learning Goals:\begin{itemize}}{\end{itemize}\end{mdframed}}
\newenvironment{listSectionObjectives}{\begin{mdframed}[style=OutcomeStyle]After completing the following journal entries, students should be able to:\begin{itemize}}{\end{itemize}\end{mdframed}}


\makeatletter
\let\c@definition\relax
\let\c@warning\relax
\makeatother
\let\definition\relax
\let\enddefinition\relax

\let\warning\relax
\let\endwarning\relax

\newtheoremstyle{Definition}{\topsep}{\topsep}%%% space between body and thm
		{}                              %%% Thm body font
		{}                              %%% Indent amount (empty = no indent)
		{\bfseries}            %%% Thm head font
		{}                              %%% Punctuation after thm head
		{3ex}                           %%% Space after thm head
		{\thmname{#1}}%%% Thm head spec
\theoremstyle{Definition}
\newtheorem{definition}{Definition}
\newtheorem{warning}{Warning}



%% my commands

\newcommand{\snap}{{\bfseries\itshape\textsf{Snap!}}}
\newcommand{\flavor}{\link[\snap]{https://snap.berkeley.edu/}}
\newcommand{\mooculus}{\textsf{\textbf{MOOC}\textnormal{\textsf{ULUS}}}}
\newcommand{\stringstar}[2]{\left\{\frac{#1}{#2}\right\}}
\renewcommand{\l}{\ell}
\renewcommand{\bar}{\overline}


\usepackage{tkz-euclide}
%\usetkzobj{all}
\tikzstyle geometryDiagrams=[rounded corners=.5pt,ultra thick,color=black]
\colorlet{penColor}{black} % Color of a curve in a plot



\ifhandout\newcommand{\mynewpage}{\newpage}\else\newcommand{\mynewpage}{}\fi


%% for diagram with seven types of frieze
\usetikzlibrary{cd}



%% From: https://tex.stackexchange.com/questions/17522/pascals-triangle-in-tikz

\def\binomialCoefficient#1#2{%  #1 >= 0 (otherwise 0); (K=#2 out of N=#1); expandable (needs 2 expansion); leaves no \else/\fi junk
  \the\numexpr 1\expandafter\bKN\expandafter{\the\numexpr #2\relax}{#1}\relax}
\def\bKN#1#2{% #1 not an expression, expanded at most twice per call; 
  \ifnum #1<0 *0% may leave at most 5 dangling \else or \fi
  \else    \ifnum 0<\numexpr 2*#1-(#2)\relax \expandafter\bKN\expandafter{\the\numexpr #2-(#1)\relax}{#2}%
           \else  \bkNK 1{#2}{#1}\fi\fi}
\def\bkNK#1#2#3{% 1,3 not expressions
  \ifnum #1>#3 % end: falls through to \relax
  \else  *(#2)/#1\expandafter\bNkKfi\expandafter{\the\numexpr#2-1\relax}{#1+1}{#3}%
  \fi}      % Inserting \fi then exchanging it is needed for the pre-else branch
\def\bNkKfi#1#2#3#4{%  4 is \fi, 3 may not be an expression; avoids unexpanded \fi's at end
 #4\expandafter\bkNK\expandafter{\the\numexpr#2\relax}{#1}{#3}}





\newcommand{\checkYourselfAbstract}{\begin{abstract} Set a timer and
    check your understanding by seeing if you can answer five questions in
    ten minutes. Make sure you can explain why each of your answers is correct.
\end{abstract}}


%% STAR POLYGON DRAWER
\usetikzlibrary{math}

\newcommand{\starpoly}[2]{\begin{center}\begin{tikzpicture}[scale=.5, transform shape]\pic {tikzngon={#1}{#2}};\end{tikzpicture}\end{center}}
%% N-GON code
\tikzset{
    pics/tikzngon/.style n args={2}{
        code={
        \tikzmath{\n = #1;\s = #2;\rr=6;\m=\n-1;\dd=.4;}
        \foreach \i in {0,1,...,\m}
          {
            \draw[ultra thick,rounded corners=.05mm]
            ({\rr*sin(\i *360/\n)},{\rr*cos(\i *360/\n)}) --
            ({\rr*sin((\i+\s)*360/\n)},{\rr*cos((\i+\s)*360/\n)});
          }
          \foreach \i in {0,1,...,\m}
            {\pgfmathtruncatemacro{\xy}{\i+1}
             \node[circle,fill=black,inner sep=0pt, minimum size=35pt,text=white]
             at ({(\rr)*sin((mod(\i*\s,\n))*360/(\n))},{(\rr)*cos((mod(\i*\s,\n))*360/\n)}) {\normalfont\Huge\bfseries\sffamily{\xy}};
           }
        }}}
%% END STAR POLYGON DRAWER








%% redefine Part
\makeatletter
\renewcommand\part{%
  \if@openright
    \cleardoublepage
  \else
    \clearpage
  \fi
  \thispagestyle{plain}%
  \if@twocolumn
    \onecolumn
    \@tempswatrue
  \else
    \@tempswafalse
  \fi
  \null\vfil
  \secdef\@part\@spart}

\def\@part[#1]#2{%
    \ifnum \c@secnumdepth >-2\relax
      \refstepcounter{part}%
      \addcontentsline{toc}{part}{\thepart\hspace{1em}#1}%
    \else
      \addcontentsline{toc}{part}{#1}%
    \fi
    \markboth{}{}%
    {\centering
     \interlinepenalty \@M
     \normalfont
     \ifnum \c@secnumdepth >-2\relax
       \huge\sffamily\bfseries \partname\nobreakspace\thepart
       \par
       \vskip 20\p@
     \fi
     \Huge \bfseries #2\par}%
    \@endpart}
\def\@spart#1{%
    {\centering
     \interlinepenalty \@M
     \normalfont
     \Huge \bfseries #1\par}%
    \@endpart}
\def\@endpart{\vfil\newpage
              \if@twoside
               \if@openright
                \null
                \thispagestyle{empty}%
                \newpage
               \fi
              \fi
              \if@tempswa
                \twocolumn
                \fi}
\makeatother
